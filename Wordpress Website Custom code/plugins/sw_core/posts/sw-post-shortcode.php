<?php /*********************** * Ya Post  * ***************************/ function ya_post_shortcode($atts){	  $output = $title = $number = $el_class = '';extract( shortcode_atts( array(	'title' => '',	'number' => 5,	'type' =>'the_blog',	'category_id' =>'',	'orderby'=>'',	'order' => '',	'post_status' => 'publish',	'length' => 40,	'el_class' => ''), $atts ) );$pf_id = 'posts-'.rand().time();$term = get_term_by( 'slug', $category_id, 'category' );	$list = get_posts(( array('category' =>$term->term_id,'posts_per_page' =>  $number,'orderby' => $orderby,'order' => $order ) ));if (count($list)>0){	$i = 0;	$j = 0;	$k = 0;if($type =='the_blog'){$output ='<div class="block-title-bottom">			<h2>'.$title.'</h2>	</div>';$output .='<div class="widget-the-blog">';		foreach ($list as $key => $post){		$output .='<div class="widget-post-inner">';		$output .='<div class="date-blog-left">					<div class="d-blog">						'.get_the_time( 'd', $post->ID ).'								</div>					<div class="m-blog">						'.get_the_time( 'M', $post->ID ).'						</div>				</div>';		$output .= '<div class="widget-caption">';		$output .= '<div class="item-title">';		$output	.= '<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.esc_html( $post->post_title ).'</a></h4>';	  	$output	.=	'</div><div class="item-content">';							if ( preg_match('/<!--more(.*?)?-->/', $post->post_content, $matches) ) {								$content = explode($matches[0], $post->post_content, 2);								$content = $content[0];							} else {								$content = wp_trim_words($post->post_content, $length, ' ');							}		$output	.=	esc_html( $content );		$output	.=	'</div>				</div>			</div>';		}	$output .='</div>';     return $output;	}	/***************** Latest Blog *******************/		if( $type == 'latest_blog' ) {			$i = 0;	$output ='<div class="lates-blog">';				foreach($list as $key => $post ){				if( $key % 2 == 0 ){ 					$class = ( $i % 2 == 0 ) ? ''  : 'item-odd';	    	$output	.= '<div class="item clearfix '.esc_attr( $class ).'">';		 $i++; } 	$output	.=  '<div class="blog-item pull-left">					<div class="latest-blog-inner clearfix">						<div class="widget-thumb pull-left">';	$output	.=  '<a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.get_the_post_thumbnail($post->ID).'</a>';	$output	.=  '<div class="entry-date">								<div class="day-post">'.get_the_time( 'd', $post->ID ).'</div>								<div class="mon-post">'.get_the_time( 'M', $post->ID ).'</div>							</div>						</div>						<div class="widget-content-wrap">							<div class="widget-content">								<div class="item-title">									<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.esc_html( $post->post_title ).'</a></h4>								</div>								<div class="item-content">									<p>';																					if ( preg_match('/<!--more(.*?)?-->/', $post->post_content, $matches) ) {											$content = explode($matches[0], $post->post_content, 2);											$content =  wp_trim_words($content[0], $length, ' ');											} else {												$content = wp_trim_words($post->post_content, $length, ' ');											}	$output	.=	esc_html( $content );									$output	.=	'</p>								</div>								<div class="bl_read_more"><a href="'.get_permalink($post->ID).'">'.esc_html__('Read more','sw_core').'<i class="fa fa-angle-double-right"></i></a></div>							</div>						</div>					</div>				</div>';			if( ( $key+1 ) % 2 == 0 || ( $key+1 ) == count( $list ) ){ 	$output	.= '</div>';	 } 					}	$output	.='</div>';	  return $output;    }	/*****************  indicators  ******************/if($type == 'indicators') {	$output='<div id="'.$pf_id.'" class="blog-indicators carousel slide '.$el_class.'">';if($title !=''){$output.='<div class="block-title">			<strong>				<span>'.$title.'</span>			</strong>			<div class="sn-img icon-bacsic sn-blog"></div>			</div>';}$output.='<div class="carousel-inner">';			  foreach( $list as $i => $item ){				if( $i % 1 == 0 ){ 				$active = ($i== 0)? 'active' :'';	$output.='<div class="item '.$active.'">';	$output.='<div class="row">';			   } 	$output.='<div class="item-inner col-lg-12">';    $output.='<a href="'.get_permalink($item->ID).'" title="'.$item->post_title.'">'.get_the_post_thumbnail($item->ID, 'thumbnail').'</a>';		$output.='<div class="postTitle">';	$output.='<h2><a title="'.$item->post_title.'" href="'.get_permalink($item->ID).'">'.$item->post_title.'</a></h2>';	$output.='</div>';	$output.='<div class="item-description">';					$content = wp_trim_words($item->post_content, $length, ' ');	$output.= esc_html( $content );	$output.='</div>';							$output.='</div>';			if( ( $i+1 )%1==0 || ( $i+1 ) == $numberposts ){$output.='	</div></div>';} 			  $i++;}		$output.='</div>';$output.='<ul class="carousel-indicators">';			  foreach( $list as $j => $item ) {				 if( $j % 1 == 0 ) {  $k++;				 $active = ($j== 0)? 'active' :'';$output.='<li class="'.$active.'" data-slide-to="'.($k-1).'" data-target="#'.$pf_id.'"> ';				}  if( ( $j+1 ) % 1 == 0 || ( $j+1 ) == $numberposts ){$output.='</li>';							}									$j++; 			  }$output.='</ul>';$output.='</div>';	return $output;	}if($type == '2_column'){	$output='<div class="widget-the-blog">';	$output.='<div class="block-title-bottom">				<h2>'.$title.'</h2>		</div>';	$output .='<ul>';		foreach ($list as $key => $post){	    if ( $key == 0 && get_the_post_thumbnail( $post->ID ) ) {	$output .='<li class="widget-post item-'.$key.'">';	$output	.='<div class="widget-post-inner">';	$output	.='<div class="widget-thumb">';	$output .='<a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.get_the_post_thumbnail($post->ID, 'medium').'</a>';	$output	.='</div>';	$output .='<div class="widget-caption">';	$output .='<div class="item-title">';	$output .='<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.$post->post_title.'</a></h4>';	$output .='<div class="entry-meta">';	$output .='<span class="entry-time">'.human_time_diff( get_the_time('U'), current_time('timestamp') ) . ' ago'.'</span>';	$output .='<span class="entry-comment"><i class="fa fa-comment"></i>'.$post->comment_count .'<span>'. __(' comments', 'sw_core').'</span></span>';	$output	.='<span class="entry-author"><i class="fa fa-user"></i>'.get_the_author_link().'</span></div></div>';	$output.='<div class="item-content">';								$content = wp_trim_words($post->post_content, $length, ' ');			$output.= esc_html( $content );	$output.='</div></div></div>';	$output.='</li>';		} else {	$output.='<li class="widget-post item-'.$key.'">';	$output.='<div class="widget-post-inner">';	$output.='<div class="widget-caption">';	$output.='<div class="item-title">';	$output.='<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.$post->post_title.'</a></h4>';	$output.='<div class="item-publish">'.human_time_diff(strtotime($post->post_date), current_time('timestamp') ) . ' ago</div>';	$output.='	</div></div></div>';						$output.='</li>';   }  }	$output.='</ul>';    $output.='</div>';	return $output;}if($type == 'slide_show'){	$output = '<div id="'.$pf_id.'" class="carousel slide content" data-ride="carousel">';    $output.='<div class="carousel-inner">';     foreach( $list as $i => $item ){		 if( $i == 0 ){           $output.='<div class="item active">';		 }else{			   $output.='<div class="item">';		 }    $output.='<a href="'.get_permalink($item->ID).'" title="'.$item->post_title.'">'.get_the_post_thumbnail($item->ID).'</a>';	$output.='<div class="entry-meta"><span class="entry-comment"><i class="fa fa-comment"></i>'.$item->comment_count.'</span></div>';						    $output.= '<div class="carousel-caption">';    $output.='<div class="carousel-caption-inner">';    $output.='<a href="'.get_permalink($item->ID).'">'.$item->post_title.'</a>';    $output.='<div class="item-description">';				if ( preg_match('/<!--more(.*?)?-->/', $item->post_content, $matches) ) {					$content = explode($matches[0], $item->post_content, 2);					$content = $content[0];				} else {					$content = wp_trim_words($item->post_content, $length, ' ');				}	$output.= esc_html( $content );	$output.='</div></div></div></div>';     }  $output.='</div>';  	$output.='<div class="carousel-cl">';    $output.='<a class="left carousel-control" href="#'.$pf_id.'" role="button" data-slide="prev"></a>';    $output.='<a class="right carousel-control" href="#'.$pf_id.'" role="button" data-slide="next"></a>';	$output.='</div></div>';	return $output;}if($type == 'middle_right'){    $output ='<div class="widget-the-blog news-style">';	$output.='<ul>';     foreach ($list as $key => $post){	if ( $key == 0 ) {	$output.='<div class="view-all"><a href="'.get_category_link($category_id).'">'. esc_attr__( 'View All', 'sw_core' ).'<i class="fa fa-caret-right"></i></a></div>';	$output.='<li class="widget-post item-'.$key.' first-news">';	$output.='<div class="widget-post-inner">';	$output.='<div class="widget-thumb">';	$output.='<a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.get_the_post_thumbnail($post->ID, 'medium').'</a>';	$output.='</div>';	$output.='<div class="widget-caption">';	$output.='<div class="item-title">';	$output.='<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.$post->post_title.'</a></h4>';	$output.='<div class="entry-meta">';	$output.='<span class="entry-time">'.human_time_diff( get_the_time('U'), current_time('timestamp') ) . ' ago</span>';	$output.='<span class="entry-comment"><i class="fa fa-comment"></i>'.$post->comment_count.'</span>';    $output.='<span class="entry-author"><i class="fa fa-user"></i>'.get_the_author_link().'</span>';			$output.='</div></div>';	$output.='<div class="item-content">';												if ( preg_match('/<!--more(.*?)?-->/', $post->post_content, $matches) ) {								$content = explode($matches[0], $post->post_content, 2);								$content = $content[0];							} else {								$content = wp_trim_words($post->post_content, $length, ' ');							}	$output.= esc_html( $content );	$output.='</div></div></div></li>';		 } else {	$output.='<li class="widget-post item-'.$key.' other-news">';	$output.='<div class="widget-post-inner">';	$output.='<div class="widget-thumb">';	$output.='<a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.get_the_post_thumbnail($post->ID, 'thumbnail').'</a>';	$output.='</div>';	$output.='<div class="widget-caption">';	$output.='<div class="item-title">';	$output.='<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.$post->post_title.'</a></h4>';	$output.='<div class="item-publish">'.human_time_diff(strtotime($post->post_date), current_time('timestamp') ) . ' ago</div>';	$output.='</div></div></div></li>';	} 	}	$output.='</ul></div>';return $output;}/****************Blog style 2       *****************/   if($type == 'blog_style2'){    $output ='<div class="widget-the-blog news-style-2">';	$output .='<div class="block-title" style="position: relative;">		<strong>			<span>New Blog</span>			<a class="sn-view" title="'. esc_attr__( 'View All Category', 'sw_core' ) .'" href="'.get_category_link($category_id).'">View All</a>		</strong>				</div>';	$output.='<ul>';     foreach ($list as $key => $post){	$output.='<li class="widget-post">';	$output.='<div class="widget-post-inner">';	$output.='<div class="widget-thumb">';	$output.='<a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.get_the_post_thumbnail($post->ID, 'medium').'</a>';	$output .='<div class="sn-datev2">					 <div class="d-blog">						'.get_the_time( 'd', $post->ID ).'										 </div>					<div class="m-blog">					'.get_the_time( 'M', $post->ID ).'					</div>				</div>';	$output.='</div>';	$output.='<div class="widget-caption">';	$output.='<div class="item-title">';	$output.='<h4><a href="'.get_permalink($post->ID).'" title="'.esc_attr( $post->post_title ).'">'.$post->post_title.'</a></h4>';		$output.='</div>';	$output.='<div class="item-content">';           $content = wp_trim_words($post->post_content, $length, ' ');	$output.= esc_html( $content );	$output.='</div></div></div></li>';	}	$output.='</ul></div>';return $output;}}} add_shortcode('ya_post','ya_post_shortcode');